# ============================================
# NOTIFICACIONES (Modo Producción - Emails reales)
# ============================================
# Cambiar a 'console' para activar el menú interactivo
spring.profiles.active=console

app.notifications.push.enabled=true
app.notifications.discord.enabled=false

spring.application.name=TrabajoPracticoProcesoDesarrollo


# Puerto (cambiá si 8080 está ocupado)
server.port=8080

# === MySQL local ===
spring.datasource.url=jdbc:mysql://localhost:3306/scrims_db?createDatabaseIfNotExist=true&useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
spring.datasource.username=root
spring.datasource.password=Tizi2025!
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# === JPA/Hibernate ===
# Keep schema between restarts to avoid transient 'table not found' during dev
# Temporarily disable schema auto-update to avoid Hibernate trying to add FKs while we inspect the schema
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# Ensure data.sql runs AFTER JPA creates the schema
spring.jpa.defer-datasource-initialization=true
spring.sql.init.mode=always
spring.sql.init.continue-on-error=true

# === Rate limiting ===
app.ratelimit.capacity=100
app.ratelimit.periodSeconds=60
app.ratelimit.keyStrategy=ip

# Harmonized rate-limiter properties (used by in-memory interceptor)
# windowSeconds = fixed window length in seconds
app.ratelimit.windowSeconds=60
# maxPerIp = number of requests allowed per window per IP
app.ratelimit.maxPerIp=30
# maxPerUser = number of requests allowed per window per authenticated user
app.ratelimit.maxPerUser=10
# enabled flag: set to false to disable rate limiting (useful for tests/dev)
app.ratelimit.enabled=true



# === CONFIGURACIÓN PARA ENVIAR CORREOS REALES DESDE GMAIL ===
app.notifications.email.enabled=true

spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=tiagodearaujo14@gmail.com
spring.mail.password=gahmfeqvlaluaeli
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.from=tiagodearaujo14@gmail.com



#integrations.discord.webhookUrl=https://discord.com/api/webhooks/...

# === Logging ===
# En modo prod/dev: DEBUG para seguridad, en modo console: solo errores
logging.level.org.springframework.security=WARN
logging.level.org.springframework.web=WARN
logging.level.org.hibernate=WARN
logging.level.com.zaxxer.hikari=WARN
logging.level.org.apache.catalina=WARN
